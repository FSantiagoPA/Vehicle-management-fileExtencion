CREATE DATABASE RECUPERACION; 
USE RECUPERACION; 
DROP TABLE IF EXISTS ACCIDENT_FP07; 
DROP TABLE IF EXISTS DRIVER_FP07; 
DROP TABLE IF EXISTS CAR_FP07; 
DROP TABLE IF EXISTS PARTICIPATED_FP07; 

-- ACCIDENT(REPORT_NUMBER, LOCATION, DATE) 
CREATE TABLE ACCIDENT_FP07
( 
REPORT_NUMBER VARCHAR (50), 
LOCATION VARCHAR (50), 
PRIMARY KEY (REPORT_NUMBER) 
); 

-- PERSON(DRIVER_ID, ADDRESS, NAME, AGE) 
CREATE TABLE PERSON_FP07 (
DRIVER_ID VARCHAR(50) PRIMARY KEY,
ADDRESS VARCHAR(255),
NAME VARCHAR(100),
AGE INT NOT NULL
);

-- CAR(LICENSE_ID, MODEL, YEAR)
CREATE TABLE CAR_FP07 
( 
LICENSE_ID VARCHAR (50), 
MODEL VARCHAR (50), 
YEAR INT, 
DRIVER_ID VARCHAR (50) NOT NULL, 
PRIMARY KEY (LICENSE_ID), 
FOREIGN KEY (DRIVER_ID) REFERENCES PERSON_FP07 (DRIVER_ID) 
); 

-- PARTICIPATED (N-N CAR AND ACCIDENT) 
CREATE TABLE PARTICIPATED_FP07 
( 
LICENSE_ID VARCHAR (50), 
REPORT_NUMBER VARCHAR (50), 
PRIMARY KEY (LICENSE_ID,REPORT_NUMBER), 
FOREIGN KEY (LICENSE_ID) REFERENCES CAR_FP07 (LICENSE_ID), 
FOREIGN KEY (REPORT_NUMBER) REFERENCES ACCIDENT_FP07 (REPORT_NUMBER) 
); 

-- POLICY (POLICY_ID) 
CREATE TABLE POLICY_FP07 
( 
POLICY_ID VARCHAR (50), 
LICENSE_ID VARCHAR (50) NOT NULL UNIQUE, 
PRIMARY KEY (POLICY_ID), 
FOREIGN KEY (LICENSE_ID ) REFERENCES CAR_FP07 (LICENSE_ID) 
); 